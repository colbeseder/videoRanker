<html>
	<head>
		<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.2.0/superhero/bootstrap.min.css" rel="stylesheet">
		<style>
			#container {
				float: left;
			}
			.fl {
				float: left;
			}
			#rating {
				width: 460px;
			}
			#scale {
				padding-top: 30px;
				width: 500px;
			}
			.jumbotron {
				margin: auto;
				width: 560px;
			}
			#videoNav {
				float: left;
				cursor: pointer;
			}
			#cover {
				  position: absolute;
				  background-color: rgba(30, 40, 50, 0.5);
				  margin-top: 120px;
				  padding-left: 133px;
				  width: 500;
				  font-size: larger;
				  display: none;
			}
			.devOnly {
				display: none;
			}
			.devmode .devOnly {
				display: block;
			}
		</style>
	</head>
	<body>
		<div id="container" style="">
			<div id="cinema" class="jumbotron">
				<div id="cover">
					The End!
				</div>
				<video id="mainScreen" src="" width="500" no_controls>
				  Your browser does not support the <code>video</code> element.
				</video>
				<div class="btn-group" role="group" aria-label="...">
					<button type="button" id="bBackToStart" class="btn btn-info"><span class="glyphicon glyphicon-backward" aria-hidden="true"></span></button>
					<button type="button" id="bPlayPause" class="btn btn-info"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></button>
					<button type="button" id="bNextVideo" class="btn btn-info"><span class="glyphicon glyphicon-step-forward" aria-hidden="true"></span></button>
				</div>
				<div style="float:right;">Score: <span id="ratingInfo" class="badge">50</span></div>
				<div id="scale">
					<span style="float: left">Bad</span><span style="float: right">Excellent</span><br>
					<span class="fl">0 </span><input id="rating" class="fl" type="range" value="50" min="0" max="100" step="1"><span class="fl"> 100</span>
				</div>
			</div>
			<span class="devOnly" style="margin-left: 100px"><a href="showData.html">Go to Results</a></span>
		</div>
		<div id="videoNav">

		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="videoLib.js"></script>
		<script>
			var VIDEOS = ["movies/1.MOV", "movies/2.MOV"];
			var MAX_LENGTH = 26;

			$('#videoNav').html(
				videoList(VIDEOS)
			);
			$('#videoNav li').on('click', function(ev){
				var idx = $('#videoNav li').index(this);
				changeVideo(idx);
			});

			function changeVideo(i){
				cinema.stop();
				cinema = videoLib.chain(VIDEOS, "#cinema", MAX_LENGTH, i);
			}

			/* Start video chain */
			var cinema = videoLib.chain(VIDEOS, "#cinema", MAX_LENGTH);

			/* Custom GUI code: slider */
			$('#rating').on('input', function(){
				scaleChange(0);
			});
			function scaleChange(x){
				var c = parseInt($('#rating').val(), 10);
				var n = c + x;
				$('#rating').val(n);
				$('#ratingInfo').text(n);

			}
			function scaleInc(){
				scaleChange(1);
			}
			function scaleDec(){
				scaleChange(-1);
			}

			// Arrow keys
			$(document).keydown(function(e) {
				switch(e.which) {
					case 37: // left
					case 40: // down
						scaleDec();
						break;

					case 38: // up
					case 39: // right
						scaleInc();
						break;
					default: return; // exit this handler for other keys
				}
				e.preventDefault(); // prevent the default action (scroll / move caret)
			});

			function videoList(list){
				var h = "<ul class='nav nav-pills nav-stacked'>";
				for(var i = 0 ; i < list.length; ++i){
					h += "<li><a>" + list[i] + "</a></li>";
				}
				h += "</ul>";
				return h;
			}

			/* Dev controls */
			if (window.user === "DEV"){
				$("#mainScreen").attr('controls', 'controls');
				$('body').addClass("devmode");
			}

		</script>
	</body>
</html>
